console.log("ðŸ”¥ createUser.js loaded!");document.addEventListener("DOMContentLoaded",function(){const a=document.getElementById("register-form");a.addEventListener("submit",function(s){s.preventDefault(),document.querySelectorAll(".error-msg").forEach(o=>o.remove()),document.querySelectorAll(".is-invalid").forEach(o=>o.classList.remove("is-invalid"));let e=new FormData(a),r={username:e.get("username").trim(),email:e.get("email").trim(),password:e.get("password"),rePassword:e.get("password_confirmation"),role:e.get("role")},t=n(r);if(t.length>0){i(t);return}a.submit()});function n(s){let e=[];return/^(?!.*\.\.)(?!.*\.$)[^\W][\w.]{0,29}$/.test(s.username)||e.push({field:"username",message:"The username may only contain letters, numbers, and underscores, and cannot end with a dot or contain consecutive dots."}),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||e.push({field:"email",message:"Invalid email format."}),/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$/.test(s.password)||e.push({field:"password",message:"The password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, and one number."}),s.password!==s.rePassword&&e.push({field:"password_confirmation",message:"Passwords do not match."}),["agent","client"].includes(s.role)||e.push({field:"role",message:"The role must be either 'agent' or 'client'."}),e}function i(s){s.forEach(e=>{let r=document.querySelector(`[name="${e.field}"]`);r.classList.add("is-invalid");let t=document.createElement("div");t.className="error-msg text-danger mt-1",t.innerText=e.message,r.parentNode.appendChild(t)})}});
